<!DOCTYPE html>
<html>
{% load staticfiles %}

<link href="{% static "css/adstyle.css" %}" rel="stylesheet" type="text/css"/>
<!-- 引入 ECharts 文件 -->
<script src="{% static "js/echarts.js" %}"></script>

{% include "header.html" %}
{% include 'menu.html' %}
{% csrf_token %}
<body>
<div class="home">
    <div class="home_right">
        <div class="homepage">
            <div class="ptbt"><a>运维平台</a></div>
            <div class="pagename"><a>监控主机信息</a></div>
            <div class="dangqianweizhi"><a>首页 > 监控系统 > 健康状态监控</a></div>
        </div>
        <div class="user_hr">
        </div>
        <div class="user_list">
            <div class="user_list_ls">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        选择监控的主机
                    </div>
                    <div class="panel-body form-group" style="margin-bottom:0;">
                        <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            <label class="col-sm-1 control-label" style="margin-top:10px">主机名：</label>
                            <div class="col-sm-2">
                                {{ monitorform.monitorHost }}
                            </div>
                            <div class="col-sm-1 col-sm-offset-2" style="margin-left:0">
                                <button type="submit" class="btn btn-primary" id="search_btn">查询</button>
                            </div>
                        </form>
                        <div class="col-sm-4" style="float: right;margin-top: 10px;">
                            <a>Number Of Hosts: {{ host_num }}</a>
                        </div>
                    </div>
                </div>
                <!-- cpu使用率 -->
                <div id="main_cpuutils"
                     style="width: 32%;height:350px;border:1px solid #dddddd;float: left;margin-right: 8px;"></div>
                <!-- cpu负载 -->
                <div id="main_cpuload"
                     style="width: 32%;height:350px;border:1px solid #dddddd;float: left;margin-right: 8px;"></div>
                <!-- memory可用大小-->
                <div id="main_memsize"
                     style="width: 32%;height:350px;border:1px solid #dddddd;float: left;margin-right: 8px;"></div>
                <!-- 磁盘信息 -->
                <div id="main_fssize"
                     style="width: 32%;height:350px;border:1px solid #dddddd;float: left;margin-right: 8px;"></div>
                <!-- home分区信息 -->
                <div id="main_fshomesize"
                     style="width: 32%;height:350px;border:1px solid #dddddd;float: left;margin-right: 8px;"></div>
                <!-- boot分区信息 -->
                <div id="main_fsbootsize"
                     style="width: 32%;height:350px;border:1px solid #dddddd;float: left;margin-right: 8px;"></div>
                <!-- 内存使用率 -->
                <div id="main_memoryratio"
                     style="width: 100%;height:450px;border:1px solid #dddddd;float: left;margin-top: 10px;"></div>
                <!-- CPU使用比例历史数据 -->
                <div id="main_cpuuserratio"
                     style="width: 100%;height:450px;border:1px solid #dddddd;float: left;margin-top: 10px;"></div>
                <!-- 网络流量图 -->
                <div id="main_netdatatraffic"
                     style="width: 100%;height:450px;border:1px solid #dddddd;float: left;margin-top: 10px;"></div>
                <script type="text/javascript">
                    //####################  【cpu使用率】图形  ####################
                    // 基于准备好的dom，初始化echarts实例
                    var myChart_cpuutils = echarts.init(document.getElementById('main_cpuutils'));
                    // 指定图表的配置项和数据
                    option_cpuutils = {
                        tooltip: {
                            formatter: "{a} <br/>{b} : {c}%"
                        },
                        toolbox: {
                            feature: {
                                restore: {},
                                saveAsImage: {}
                            }
                        },
                        series: [
                            {
                                name: 'CPU使用率',
                                type: 'gauge',
                                detail: {formatter: '{value}%'},
                                data: [{value: {{ cpuutils_now }}, name: 'CPU使用率'}]
                            },
                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart_cpuutils.showLoading();
                    setInterval(function () {
                        myChart_cpuutils.hideLoading();
                        option_cpuutils.series[0].data[0].value = (({{ cpuutils_now }}).toFixed(3));
                        myChart_cpuutils.setOption(option_cpuutils, true);
                    }, 2000);

                    // ####################  【cpu负载】图形  ####################
                    // 基于准备好的dom，初始化echarts实例
                    var myChart_cpuload = echarts.init(document.getElementById('main_cpuload'));
                    // 指定图表的配置项和数据
                    option_cpuload = {
                        tooltip: {
                            formatter: "{a} <br/>{b} : {c}%"
                        },
                        toolbox: {
                            feature: {
                                restore: {},
                                saveAsImage: {}
                            }
                        },
                        series: [
                            {
                                name: 'CPU负载',
                                type: 'gauge',
                                detail: {formatter: '{value}%'},
                                data: [{value: {{ cpuload_now }}, name: 'CPU负载'}]
                            }
                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart_cpuload.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_cpuload.hideLoading();  //显示完成后不显示loading
                        myChart_cpuload.setOption(option_cpuload, true);
                    }, 2000);


                    // ####################  【Memory可用大小】图形  ####################
                    // 基于准备好的dom，初始化echarts实例
                    var myChart_memsize = echarts.init(document.getElementById('main_memsize'));
                    // 指定图表的配置项和数据
                    option_memsize = {
                        tooltip: {
                            formatter: "{a} <br/>{b} : {c}G"
                        },
                        toolbox: {
                            feature: {
                                restore: {},
                                saveAsImage: {}
                            }
                        },
                        series: [
                            {
                                name: 'Mem可用',
                                min: 0,
                                max: 4,
                                splitNumber: 10,
                                type: 'gauge',
                                detail: {formatter: '{value}G'},
                                data: [{value: {{ fsmemsize_now }}, name: 'Mem可用'}]
                            }
                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart_memsize.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_memsize.hideLoading();  //显示完成后不显示loading
                        option_memsize.series[0].data[0].value = (({{ fsmemsize_now }}) / 1073741824).toFixed(3) - 0;
                        myChart_memsize.setOption(option_memsize, true);
                    }, 2000);


                    // ####################  【根磁盘】图形  ####################
                    // 基于准备好的dom，初始化echarts实例
                    // 磁盘使用饼图
                    var myChart_fssize = echarts.init(document.getElementById('main_fssize'));
                    option_fssize = {
                        title:
                            {
                                text: '磁盘使用情况',
                                subtext: '根磁盘',
                                x: 'center'
                            },
                        tooltip:
                            {
                                trigger: 'item',
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },
                        legend:
                            {
                                orient: 'vertical',
                                left: 'left',
                                data: ['磁盘用量', '磁盘空闲']
                            },
                        series: [
                            {
                                name: '磁盘情况',
                                type: 'pie',
                                radius: '55%',
                                center: ['50%', '60%'],
                                roseType: 'angle',
                                detail: {formatter: '{value}'},
                                "label": {
                                    "normal": {
                                        "show": true,
                                        "textStyle": {
                                            "fontSize": 14
                                        }
                                    }
                                },
                                detail: {formatter: '{value}%'},
                                data: [
                                    {value: {{ fsused_now }}, name: '磁盘用量'},
                                    {value: {{ fsfree_now }}, name: '磁盘空闲', itemStyle: {color: "#00CC00"}}
                                ]
                            }
                        ]
                    };
                    myChart_fssize.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_fssize.hideLoading();  //显示完成后不显示loading
                        option_fssize.series[0].data[0].value = (({{ fsused_now }}) / 1024).toFixed(2);
                        option_fssize.series[0].data[1].value = (({{ fsfree_now }}) / 1024).toFixed(2);
                        myChart_fssize.setOption(option_fssize, true);
                    }, 2000);


                    // ####################  【Home分区】图形  ####################
                    // 基于准备好的dom，初始化echarts实例
                    // Home分区使用饼图
                    var myChart_fshomesize = echarts.init(document.getElementById('main_fshomesize'));
                    option_fshomesize = {
                        title:
                            {
                                text: 'Home分区使用情况',
                                subtext: 'home分区单位MB',
                                x: 'center'
                            },
                        tooltip:
                            {
                                trigger: 'item',
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },
                        legend:
                            {
                                orient: 'vertical',
                                left: 'left',
                                data: ['home分区空闲', 'home分区用量']
                            },
                        series: [
                            {
                                name: '分区情况',
                                type: 'pie',
                                radius: ['50%', "70"],
                                avoidLabelOverlap: false,
                                label: {
                                    normal: {
                                        show: false,
                                        position: 'center',
                                        fontSize: 14
                                    },
                                    emphasis: {
                                        show: true,
                                        textStyle: {
                                            fontSize: '30',
                                            fontWeight: 'bold'
                                        }
                                    }
                                },

                                data: [
                                    {value: {{ fshomefree_now }}, name: 'home分区空闲'},
                                    {value: {{ fshomeused_now }}, name: 'home分区用量', itemStyle: {color: "#00CC00"}}
                                ]
                            }
                        ]
                    };
                    myChart_fshomesize.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_fshomesize.hideLoading();  //显示完成后不显示loading
                        option_fshomesize.series[0].data[0].value = (({{ fshomefree_now }}) / 1048576).toFixed(2) - 0;
                        option_fshomesize.series[0].data[1].value = (({{ fshomeused_now }}) / 1048576).toFixed(2) - 0;
                        myChart_fshomesize.setOption(option_fshomesize, true);
                    }, 2000);


                    // ####################  【Boot分区】图形  ####################
                    // 基于准备好的dom，初始化echarts实例
                    // Boot分区使用饼图
                    var myChart_fsbootsize = echarts.init(document.getElementById('main_fsbootsize'));
                    option_fsbootsize = {
                        title:
                            {
                                text: 'Boot分区使用情况',
                                subtext: 'boot分区单位MB',
                                x: 'center'
                            },
                        tooltip:
                            {
                                trigger: 'item',
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },
                        legend:
                            {
                                orient: 'vertical',
                                left: 'left',
                                data: ['boot分区空闲', 'boot分区使用']
                            },
                        series: [
                            {
                                name: '分区使用情况',
                                type: 'pie',
                                radius: '55%',
                                center: ['50%', '60%'],
                                roseType: 'angle',
                                detail: {formatter: '{value}M'},
                                "label": {
                                    "normal": {
                                        "show": true,
                                        "textStyle": {
                                            "fontSize": 14
                                        }
                                    }
                                },
                                data: [
                                    {value: {{ fsbootfree_now }}, name: 'boot分区空闲'},
                                    {value: {{ fsbootused_now }}, name: 'boot分区使用'}
                                ]
                            }
                        ]
                    };
                    myChart_fsbootsize.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_fsbootsize.hideLoading();  //显示完成后不显示loading
                        option_fsbootsize.series[0].data[0].value = (({{ fsbootfree_now }}) / 1048576).toFixed(2) - 0;
                        option_fsbootsize.series[0].data[1].value = (({{ fsbootused_now }}) / 1048576).toFixed(2) - 0;
                        myChart_fsbootsize.setOption(option_fsbootsize, true);
                    }, 2000);


                    // ####################  【内存使用率】图形  ####################

                    var myChart_memoryratio = echarts.init(document.getElementById('main_memoryratio'));
                    option_memoryratio = {
                        title: {
                            left: 'left',
                            text: '内存使用率',
                            subtext: 'Memory使用率历史数据'
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'cross'
                            }
                        },
                        toolbox: {
                            show: true,
                            left: 'center',
                            itemSize: 25,
                            top: 10,
                            feature: {
                                dataZoom: {
                                    yAxisIndex: 'none'
                                },
                                saveAsImage: {},
                                restore: {}
                            }
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            zlevel: 1,
                            data: [{% for i in data %} '{{ i.time | date:"m-d H:i:s" }}', {% endfor %}]
                            {#data: [{% for i in fsmemHistory_now_x %}{{i}},{% endfor %}],#}
                            {#data: [1,2,3,4],#}
                            {#data: [{{ fsmemHistory_now_x | safe }}],#}
                            {#data: ["2019-09-09 09:09","2019-09-09 08:08"],#}
                        },
                        yAxis: {
                            type: 'value',
                            axisLabel: {
                                formatter: '{value}'
                            },
                            axisPointer: {
                                snap: true
                            },
                            max: 1,
                            min: 0,
                        },
                        visualMap: {
                            top: 10,
                            right: 5,
                            pieces: [{
                                gt: 0,
                                lte: 0.2,
                                color: '#096'
                            }, {
                                gt: 0.2,
                                lte: 0.4,
                                color: '#01ADEF'
                            }, {
                                gt: 0.4,
                                lte: 0.6,
                                color: '#ff9933'
                            }, {
                                gt: 0.6,
                                lte: 0.8,
                                color: '#cc0033'
                            }, {
                                gt: 0.8,
                                lte: 1,
                                color: '#660099'
                            }, {
                                gt: 1,
                                color: '#7e0023'
                            }],
                            outOfRange: {
                                color: '#999'
                            }
                        },

                        dataZoom: [//给x轴设置滚动条
                            {
                                start: 0,//默认为0
                                end: 100 - 1500 / 31,//默认为100
                                type: 'slider',
                                show: true,
                                xAxisIndex: [0],
                                handleSize: 0,//滑动条的 左右2个滑动条的大小
                                height: 8,//组件高度
                                left: 50, //左边的距离
                                right: 40,//右边的距离
                                bottom: 26,//右边的距离
                                handleColor: '#ddd',//h滑动图标的颜色
                                handleStyle: {
                                    borderColor: "#cacaca",
                                    borderWidth: "1",
                                    shadowBlur: 2,
                                    background: "#ddd",
                                    shadowColor: "#ddd",
                                },
                                fillerColor: new echarts.graphic.LinearGradient(1, 0, 0, 0, [{
                                    //给颜色设置渐变色 前面4个参数，给第一个设置1，第四个设置0 ，就是水平渐变
                                    //给第一个设置0，第四个设置1，就是垂直渐变
                                    offset: 0,
                                    color: '#cc0033'
                                }, {
                                    offset: 1,
                                    color: '#1eb5e5'
                                }]),
                                backgroundColor: '#ddd',//两边未选中的滑动条区域的颜色
                                showDataShadow: false,//是否显示数据阴影 默认auto
                                showDetail: true,//即拖拽时候是否显示详细数值信息 默认true
                                {#handleIcon: 'M-292,322.2c-3.2,0-6.4-0.6-9.3-1.9c-2.9-1.2-5.4-2.9-7.6-5.1s-3.9-4.8-5.1-7.6c-1.3-3-1.9-6.1-1.9-9.3c0-3.2,0.6-6.4,1.9-9.3c1.2-2.9,2.9-5.4,5.1-7.6s4.8-3.9,7.6-5.1c3-1.3,6.1-1.9,9.3-1.9c3.2,0,6.4,0.6,9.3,1.9c2.9,1.2,5.4,2.9,7.6,5.1s3.9,4.8,5.1,7.6c1.3,3,1.9,6.1,1.9,9.3c0,3.2-0.6,6.4-1.9,9.3c-1.2,2.9-2.9,5.4-5.1,7.6s-4.8,3.9-7.6,5.1C-285.6,321.5-288.8,322.2-292,322.2z',#}
                                filterMode: 'filter',
                            },
                            //下面这个属性是里面拖到
                            {
                                type: 'inside',
                                show: true,
                                xAxisIndex: [0],
                                start: 0,//默认为1
                                end: 100 - 1500 / 31,//默认为100
                            },
                        ],

                        series: [
                            {
                                name: '内存使用率',
                                type: 'line',
                                {#smooth: true,#}
                                stack: 'a',
                                {#data: [{% for i in fsmemHistory_now %}{{ i }}, {% endfor %}],#}
                                data: [{% for i in data %} '{{ i.ratio }}',  {% endfor %}],
                                {#data: [{% for i in fsmemHistory_now %} '{{ i }}',{% endfor %} ],#}
                                {#'这里注意一下，如果不加safe，返回给前端的数据会'#}
                                {#                                出现“  &#39;185&#39;, &#39;169&#39;, &#39;183&#39;, ”#}
                                {#                                这种格式。需要进行转义#}
                                {#                                #}
                                {#data: {{ fsmemHistory_now | safe}},#}
                                {#data: [123,345],#}
                                markLine: {
                                    silent: true,
                                    data: [{
                                        yAxis: 0.2
                                    }, {
                                        yAxis: 0.4
                                    }, {
                                        yAxis: 0.6
                                    }, {
                                        yAxis: 0.8
                                    }, {
                                        yAxis: 1
                                    }]
                                }
                            }

                        ]
                    };
                    myChart_memoryratio.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_memoryratio.hideLoading();  //显示完成后不显示loading
                        myChart_memoryratio.setOption(option_memoryratio, true);
                    }, 500);


                    // ####################  【CPU使用率历史数据】图形  ####################

                    var myChart_cpuuserratio = echarts.init(document.getElementById('main_cpuuserratio'));
                    function getLocalTime(nS) {
                        return new Date(parseInt(nS) * 1000).toLocaleString().replace(/:\d{1,2}$/, ' ');
                    }

                    var  list = {{ fsCpuUserHistory_now_x | safe }}

                   for(var i = 0; i<list.length;i++){
                       list[i] = getLocalTime(list[i])
                   }

                    {#console.log(list)#}

                    {#console.log(getLocalTime(1567619444))#}
                    option_cpuuserratio = {
                        title: {
                            left: 'left',
                            text: '空间CPU使用比例',
                            subtext: 'CPU使用率历史数据'
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'cross'
                            }
                        },
                        toolbox: {
                            show: true,
                            left: 'center',
                            itemSize: 25,
                            top: 10,
                            feature: {
                                dataZoom: {
                                    yAxisIndex: 'none'
                                },
                                saveAsImage: {show: true, title: 'Download'},
                                restore: {show: true, title: 'Restore'}
                            }
                        },

                        dataZoom: [//给x轴设置滚动条
                            {
                                start: 0,//默认为0
                                end: 100 - 1500 / 31,//默认为100
                                type: 'slider',
                                show: true,
                                xAxisIndex: [0],
                                handleSize: 0,//滑动条的 左右2个滑动条的大小
                                height: 8,//组件高度
                                left: 50, //左边的距离
                                right: 40,//右边的距离
                                bottom: 26,//右边的距离
                                handleColor: '#ddd',//h滑动图标的颜色
                                handleStyle: {
                                    borderColor: "#cacaca",
                                    borderWidth: "1",
                                    shadowBlur: 2,
                                    background: "#ddd",
                                    shadowColor: "#ddd",
                                },
                                fillerColor: new echarts.graphic.LinearGradient(1, 0, 0, 0, [{
                                    //给颜色设置渐变色 前面4个参数，给第一个设置1，第四个设置0 ，就是水平渐变
                                    //给第一个设置0，第四个设置1，就是垂直渐变
                                    offset: 0,
                                    color: '#096'
                                }, {
                                    offset: 1,
                                    color: '#ff9933'
                                }]),
                                backgroundColor: '#ddd',//两边未选中的滑动条区域的颜色
                                showDataShadow: false,//是否显示数据阴影 默认auto
                                showDetail: true,//即拖拽时候是否显示详细数值信息 默认true
                                {#handleIcon: 'M-292,322.2c-3.2,0-6.4-0.6-9.3-1.9c-2.9-1.2-5.4-2.9-7.6-5.1s-3.9-4.8-5.1-7.6c-1.3-3-1.9-6.1-1.9-9.3c0-3.2,0.6-6.4,1.9-9.3c1.2-2.9,2.9-5.4,5.1-7.6s4.8-3.9,7.6-5.1c3-1.3,6.1-1.9,9.3-1.9c3.2,0,6.4,0.6,9.3,1.9c2.9,1.2,5.4,2.9,7.6,5.1s3.9,4.8,5.1,7.6c1.3,3,1.9,6.1,1.9,9.3c0,3.2-0.6,6.4-1.9,9.3c-1.2,2.9-2.9,5.4-5.1,7.6s-4.8,3.9-7.6,5.1C-285.6,321.5-288.8,322.2-292,322.2z',#}
                                filterMode: 'filter',
                            },
                            //下面这个属性是里面拖到
                            {
                                type: 'inside',
                                show: true,
                                xAxisIndex: [0],
                                start: 0,//默认为1
                                end: 100 - 1500 / 31,//默认为100
                            },
                        ],

                        legend: {
                            itemGap: 30,
                            data: [
                                {
                                    name: '用户空间CPU使用比例',
                                    icon: 'rectangle'
                                },
                                {
                                    name: '内核空间CPU使用比例',
                                    icon: 'triangle'
                                }
                            ],
                            "textStyle": {
                                "fontSize": 18,
                            },
                            x: '1100',
                            y: '20'
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            zlevel: 1,
                            {#data: [{% for i in fsCpuHistory_now_x %}{{i}},{% endfor %}],#}
                            {#data: {{ fsCpuUserHistory_now_x | safe }}#}
                            {#data: ['2019-09-09 09:09']#}
                            data: list,
                        },
                        yAxis: {
                            type: 'value',
                            axisLabel: {
                                formatter: '{value}'
                            },
                            axisPointer: {
                                snap: true
                            },
                            max: 0.8,
                            min: 0,
                        },
                        series: [
                            {
                                name: '用户空间CPU使用比例',
                                type: 'line',
                                smooth: true,
                                stack: 'a',
                                itemStyle: {
                                    normal: {
                                        color: '#d68262'
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: '#d68262'
                                        }, {
                                            offset: 1,
                                            color: '#ffe'
                                        }])
                                    }
                                },
                                data: {{ fsCpuUserHistory_now | safe}}
                            },
                            {
                                name: '内核空间CPU使用比例',
                                type: 'line',
                                smooth: true,
                                stack: 'a',
                                itemStyle: {
                                    normal: {
                                        color: '#660099'
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: '#660099'
                                        }, {
                                            offset: 1,
                                            color: '#ffe'
                                        }])
                                    }
                                },
                                data: {{ fsCpuSysHistory_now | safe}},
                                markLine: {
                                    silent: true,
                                    data: [{
                                        yAxis: 0.6
                                    }
                                    ]
                                }
                            }
                        ]
                    };
                    myChart_cpuuserratio.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_cpuuserratio.hideLoading();  //显示完成后不显示loading
                        myChart_cpuuserratio.setOption(option_cpuuserratio, true);
                    }, 500);


                    // ####################  【网络流量图】图形  ####################

                    var myChart_netdatatraffic = echarts.init(document.getElementById('main_netdatatraffic'));
                    var  date_x = {{ fsCpuUserHistory_now_x | safe }}
                   for(var i = 0; i<date_x.length;i++){
                       date_x[i] = getLocalTime(date_x[i])
                   }

                    option_netdatatraffic = {
                        title: {
                            left: 'left',
                            text: '网络流量数据图',
                            subtext: '网络流量数据单位B'
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'cross'
                            },
                        },
                        toolbox: {
                            show: true,
                            left: 'center',
                            itemSize: 25,
                            top: 10,
                            feature: {
                                dataZoom: {
                                    yAxisIndex: 'none',
                                },
                                saveAsImage: {show: true, title: 'Download'},
                                restore: {show: true, title: 'Restore'}
                            }
                        },
                        legend: {
                            itemGap: 50,
                            data: [
                                {
                                    name: '网络流入数据',
                                    {#icon: 'rect'#}
                                },
                                {
                                    name: '网络流出数据',
                                    icon: 'pin'
                                }
                            ],
                            "textStyle": {
                                "fontSize": 18,
                            },
                            x: '1100',
                            y: '20'
                        },

                        dataZoom: [//给x轴设置滚动条
                            {
                                start: 0,//默认为0
                                end: 150 - 1500 / 25,//默认为100
                                type: 'slider',
                                show: true,
                                xAxisIndex: [0],
                                handleSize: 0,//滑动条的 左右2个滑动条的大小
                                height: 8,//组件高度
                                left: 50, //左边的距离
                                right: 40,//右边的距离
                                bottom: 26,//右边的距离
                                handleColor: '#ddd',//h滑动图标的颜色
                                handleStyle: {
                                    borderColor: "#cacaca",
                                    borderWidth: "1",
                                    shadowBlur: 2,
                                    background: "#ddd",
                                    shadowColor: "#ddd",
                                },
                                fillerColor: new echarts.graphic.LinearGradient(1, 0, 0, 0, [{
                                    //给颜色设置渐变色 前面4个参数，给第一个设置1，第四个设置0 ，就是水平渐变
                                    //给第一个设置0，第四个设置1，就是垂直渐变
                                    offset: 0,
                                    color: '#759'
                                }, {
                                    offset: 1,
                                    color: '#c01'
                                }]),
                                backgroundColor: '#ddd',//两边未选中的滑动条区域的颜色
                                showDataShadow: false,//是否显示数据阴影 默认auto
                                showDetail: true,//即拖拽时候是否显示详细数值信息 默认true
                                {#handleIcon: 'M-292,322.2c-3.2,0-6.4-0.6-9.3-1.9c-2.9-1.2-5.4-2.9-7.6-5.1s-3.9-4.8-5.1-7.6c-1.3-3-1.9-6.1-1.9-9.3c0-3.2,0.6-6.4,1.9-9.3c1.2-2.9,2.9-5.4,5.1-7.6s4.8-3.9,7.6-5.1c3-1.3,6.1-1.9,9.3-1.9c3.2,0,6.4,0.6,9.3,1.9c2.9,1.2,5.4,2.9,7.6,5.1s3.9,4.8,5.1,7.6c1.3,3,1.9,6.1,1.9,9.3c0,3.2-0.6,6.4-1.9,9.3c-1.2,2.9-2.9,5.4-5.1,7.6s-4.8,3.9-7.6,5.1C-285.6,321.5-288.8,322.2-292,322.2z',#}
                                filterMode: 'filter',
                            },
                            //下面这个属性是里面拖到
                            {
                                type: 'inside',
                                show: true,
                                xAxisIndex: [0],
                                start: 0,//默认为1
                                end: 100 - 1500 / 31,//默认为100
                            },
                        ],

                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            zlevel: 1,
                            {#data: {{ netInDatatraffic_now_x | safe }}#}
                            data: date_x
                        },
                        yAxis: {
                            type: 'value',
                            axisLabel: {
                                formatter: '{value}'
                            },
                            axisPointer: {
                                snap: true
                            },
                            max: 1000,
                            min: 0,
                        },

                        series: [
                            {
                                name: '网络流入数据',
                                type: 'line',
                                smooth: true,
                                stack: 'a',
                                itemStyle: {
                                    normal: {
                                        color: '#096'
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: '#096'
                                        }, {
                                            offset: 1,
                                            color: '#ffe'
                                        }])
                                    }
                                },
                                data: {{ netInDatatraffic_now | safe }}
                            },
                            {
                                name: '网络流出数据',
                                type: 'line',
                                smooth: true,
                                stack: 'a',
                                itemStyle: {
                                    normal: {
                                        color: '#cc0033'
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: '#cc0033'
                                        }, {
                                            offset: 1,
                                            color: '#ffe'
                                        }])
                                    }
                                },
                                data:{{ netOutDatatraffic_now | safe }},
                                markLine: {
                                    silent: true,
                                    data: [{
                                        yAxis: 600
                                    }
                                    ]
                                }

                            }
                        ]
                    };
                    myChart_netdatatraffic.showLoading();  //显示loading
                    setInterval(function () {
                        myChart_netdatatraffic.hideLoading();  //显示完成后不显示loading
                        myChart_netdatatraffic.setOption(option_netdatatraffic, true);
                    }, 500);
                </script>
            </div>
        </div>
    </div>
</div>
</body>
</html>